rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // ===== üèÜ Production Mode ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô =====
    
    // Age Groups - ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô, ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ (‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô)
    match /age_groups/{groupId} {
      allow read: if true;
      allow write: if false;
    }
    
    // Content Items - ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô, ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ (‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô)
    match /content_items/{itemId} {
      allow read: if true;
      allow write: if false;
    }
    
    // Heatmap - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ, ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ, ‡πÅ‡∏ï‡πà‡∏•‡∏ö/‡πÅ‡∏Å‡πâ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ
    match /heatmap/{docId} {
      allow read: if true;
      allow create: if true;  // ‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å heatmap ‡πÑ‡∏î‡πâ
      allow update, delete: if false;
    }
    
    // User Interactions - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
    match /user_interactions/{docId} {
      allow read: if true;
      allow create: if true;  // ‡πÉ‡∏´‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å interaction ‡πÑ‡∏î‡πâ
      allow update, delete: if false;
    }
    
    // Sessions - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
    match /sessions/{sessionId} {
      allow read: if true;
      allow create: if true;  // ‡πÉ‡∏´‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å session ‡πÑ‡∏î‡πâ
      allow update, delete: if false;
    }
    
    // Careers - ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
    match /careers/{document=**} {
      allow read: if true;
      allow write: if false;
    }
    
    // Pi5 IoT Controls (‡∏¢‡∏±‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÑ‡∏î‡πâ)
    match /led_status/{document=**} {
      allow read, write: if true;
    }
    
    match /presence/{document=**} {
      allow read, write: if true;
    }
  }
}
